<?php
defined('BASEPATH') or exit('No direct script access allowed');

class Migration_posyanduseed extends CI_Migration
{

    var $Posyandu = array(
        array('kecamatan' => 'Gladagsari', 'desa' => 'Candisari', 'nama' => 'Anggrek'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Candisari', 'nama' => 'Mawar'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Candisari', 'nama' => 'Cempaka'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Candisari', 'nama' => 'Melati'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Candisari', 'nama' => 'Dahlia'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Jlarem', 'nama' => 'Kartini'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Jlarem', 'nama' => 'Wulansari'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Jlarem', 'nama' => 'Kartika'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Jlarem', 'nama' => 'Melati'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Jlarem', 'nama' => 'Tunas Bakti'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kembang', 'nama' => 'Puspitorini 1'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kembang', 'nama' => 'Puspitorini 2'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kembang', 'nama' => 'Puspitorini 3'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kembang', 'nama' => 'Puspitorini 4'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kembang', 'nama' => 'Puspitorini 5'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngadirojo', 'nama' => 'Mutiara Katon'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngadirojo', 'nama' => 'Pamuji'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngadirojo', 'nama' => 'Rahayu'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngadirojo', 'nama' => 'Asri'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngadirojo', 'nama' => 'Lestari'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngadirojo', 'nama' => 'Widodo'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngargoloka', 'nama' => 'Sri Gading'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngargoloka', 'nama' => 'Dahlia'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngargoloka', 'nama' => 'Cempaka'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngargoloka', 'nama' => 'Mawar'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngargoloka', 'nama' => 'Melati'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngagrong', 'nama' => 'Sari Asih'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngagrong', 'nama' => 'Mawar'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngagrong', 'nama' => 'Bigonia'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Ngagrong', 'nama' => 'Nusa Indah'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Sampetan', 'nama' => 'Dahlia'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Sampetan', 'nama' => 'Melati'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Sampetan', 'nama' => 'Cempaka'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Sampetan', 'nama' => 'Mawar'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Sampetan', 'nama' => 'Menur'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Sampetan', 'nama' => 'Anggrek'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Gladagsari', 'nama' => 'Lily'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Gladagsari', 'nama' => 'Melati Putih'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Gladagsari', 'nama' => 'Mawar Merah'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Gladagsari', 'nama' => 'Cepaka'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Gladagsari', 'nama' => 'Menur'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Gladagsari', 'nama' => 'Aster'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Gladagsari', 'nama' => 'Dahlia'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Gladagsari', 'nama' => 'Sedap Malam'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kaligentong', 'nama' => 'Wijaya Kusuma'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kaligentong', 'nama' => 'Dahlia'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kaligentong', 'nama' => 'Cendana'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kaligentong', 'nama' => 'Kamboja'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kaligentong', 'nama' => 'Mawar Putih'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kaligentong', 'nama' => 'Kenanga'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kaligentong', 'nama' => 'Melati'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kaligentong', 'nama' => 'Mawar Merah'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kaligentong', 'nama' => 'Cempakasari'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Kaligentong', 'nama' => 'Anggrek'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Seboto', 'nama' => 'Melati'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Seboto', 'nama' => 'Miranti'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Seboto', 'nama' => 'Mawar 1'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Seboto', 'nama' => 'Mawar 2'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Seboto', 'nama' => 'Anggrek'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Seboto', 'nama' => 'Dahlia'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Seboto', 'nama' => 'Mawar 3'),
        array('kecamatan' => 'Gladagsari', 'desa' => 'Seboto', 'nama' => 'Mekarsari'),
        array('kecamatan' => 'Teras', 'desa' => 'Doplang', 'nama' => 'Menur'),
        array('kecamatan' => 'Teras', 'desa' => 'Doplang', 'nama' => 'Aster'),
        array('kecamatan' => 'Teras', 'desa' => 'Doplang', 'nama' => 'Dahlia'),
        array('kecamatan' => 'Teras', 'desa' => 'Doplang', 'nama' => 'Anggrek'),
        array('kecamatan' => 'Teras', 'desa' => 'Doplang', 'nama' => 'Cempaka'),
        array('kecamatan' => 'Teras', 'desa' => 'Doplang', 'nama' => 'Bugenvile'),
        array('kecamatan' => 'Teras', 'desa' => 'Doplang', 'nama' => 'Melati'),
        array('kecamatan' => 'Teras', 'desa' => 'Doplang', 'nama' => 'Mawar'),
        array('kecamatan' => 'Teras', 'desa' => 'Doplang', 'nama' => 'Flamboyan'),
        array('kecamatan' => 'Teras', 'desa' => 'Kadireso', 'nama' => 'Marsudi Rahayu 1'),
        array('kecamatan' => 'Teras', 'desa' => 'Kadireso', 'nama' => 'Marsudi Rahayu 2'),
        array('kecamatan' => 'Teras', 'desa' => 'Kadireso', 'nama' => 'Marsudi Rahayu 3'),
        array('kecamatan' => 'Teras', 'desa' => 'Kadireso', 'nama' => 'Marsudi Rahayu 4'),
        array('kecamatan' => 'Teras', 'desa' => 'Kadireso', 'nama' => 'Marsudi Rahayu 5'),
        array('kecamatan' => 'Teras', 'desa' => 'Kadireso', 'nama' => 'Marsudi Rahayu 6'),
        array('kecamatan' => 'Teras', 'desa' => 'Kadireso', 'nama' => 'Marsudi Rahayu 7'),
        array('kecamatan' => 'Teras', 'desa' => 'Kadireso', 'nama' => 'Marsudi Rahayu 8'),
        array('kecamatan' => 'Teras', 'desa' => 'Kopen', 'nama' => 'Mekarsari'),
        array('kecamatan' => 'Teras', 'desa' => 'Kopen', 'nama' => 'Kenanga'),
        array('kecamatan' => 'Teras', 'desa' => 'Kopen', 'nama' => 'Dahlia 1'),
        array('kecamatan' => 'Teras', 'desa' => 'Kopen', 'nama' => 'Dahlia 2'),
        array('kecamatan' => 'Teras', 'desa' => 'Kopen', 'nama' => 'Mawar 1'),
        array('kecamatan' => 'Teras', 'desa' => 'Kopen', 'nama' => 'Mawar 2'),
        array('kecamatan' => 'Teras', 'desa' => 'Kopen', 'nama' => 'Melati'),
        array('kecamatan' => 'Teras', 'desa' => 'Nepen', 'nama' => 'Umbul sari'),
        array('kecamatan' => 'Teras', 'desa' => 'Nepen', 'nama' => 'Sekar sari'),
        array('kecamatan' => 'Teras', 'desa' => 'Nepen', 'nama' => 'PeniSari'),
        array('kecamatan' => 'Teras', 'desa' => 'Nepen', 'nama' => 'Mekar Sari'),
        array('kecamatan' => 'Teras', 'desa' => 'Sudimoro', 'nama' => 'Rahayu 1'),
        array('kecamatan' => 'Teras', 'desa' => 'Sudimoro', 'nama' => 'Rahayu 2'),
        array('kecamatan' => 'Teras', 'desa' => 'Sudimoro', 'nama' => 'Rahayu 3'),
        array('kecamatan' => 'Teras', 'desa' => 'Sudimoro', 'nama' => 'Rahayu 4'),
        array('kecamatan' => 'Teras', 'desa' => 'Sudimoro', 'nama' => 'Rahayu 5'),
        array('kecamatan' => 'Teras', 'desa' => 'Sudimoro', 'nama' => 'Rahayu 6'),
        array('kecamatan' => 'Teras', 'desa' => 'bangsalan', 'nama' => 'Teratai'),
        array('kecamatan' => 'Teras', 'desa' => 'bangsalan', 'nama' => 'Dahlia'),
        array('kecamatan' => 'Teras', 'desa' => 'bangsalan', 'nama' => 'Anggrek'),
        array('kecamatan' => 'Teras', 'desa' => 'bangsalan', 'nama' => 'Melati'),
        array('kecamatan' => 'Teras', 'desa' => 'bangsalan', 'nama' => 'Mawar'),
        array('kecamatan' => 'Teras', 'desa' => 'Salakan', 'nama' => 'Cempaka'),
        array('kecamatan' => 'Teras', 'desa' => 'Salakan', 'nama' => 'Kenanga'),
        array('kecamatan' => 'Teras', 'desa' => 'Salakan', 'nama' => 'Dahlia'),
        array('kecamatan' => 'Teras', 'desa' => 'Salakan', 'nama' => 'Menur'),
        array('kecamatan' => 'Teras', 'desa' => 'Salakan', 'nama' => 'Anggrek'),
        array('kecamatan' => 'Teras', 'desa' => 'Salakan', 'nama' => 'Melati'),
        array('kecamatan' => 'Teras', 'desa' => 'Teras', 'nama' => 'Melati 2'),
        array('kecamatan' => 'Teras', 'desa' => 'Teras', 'nama' => ' SedyoMulyo'),
        array('kecamatan' => 'Teras', 'desa' => 'Teras', 'nama' => 'Makmur'),
        array('kecamatan' => 'Teras', 'desa' => 'Teras', 'nama' => 'Sari Mulyo'),
        array('kecamatan' => 'Teras', 'desa' => 'Teras', 'nama' => 'Mekar Sari'),
        array('kecamatan' => 'Teras', 'desa' => 'Teras', 'nama' => 'Mawar indah'),
        array('kecamatan' => 'Teras', 'desa' => 'Teras', 'nama' => 'Cempaka'),
        array('kecamatan' => 'Teras', 'desa' => 'Teras', 'nama' => 'Kenanga'),
        array('kecamatan' => 'Teras', 'desa' => 'Teras', 'nama' => 'Markisa'),
        array('kecamatan' => 'Teras', 'desa' => 'Teras', 'nama' => 'Anggrek'),
        array('kecamatan' => 'Teras', 'desa' => 'Teras', 'nama' => 'Melati 1'),
        array('kecamatan' => 'Teras', 'desa' => 'Randusari', 'nama' => 'Kenanga'),
        array('kecamatan' => 'Teras', 'desa' => 'Randusari', 'nama' => 'Nusa Indah'),
        array('kecamatan' => 'Teras', 'desa' => 'Randusari', 'nama' => 'Cempaka'),
        array('kecamatan' => 'Teras', 'desa' => 'Randusari', 'nama' => 'Flamboyan'),
        array('kecamatan' => 'Teras', 'desa' => 'Randusari', 'nama' => 'Teratai'),
        array('kecamatan' => 'Teras', 'desa' => 'Randusari', 'nama' => 'Segar 2'),
        array('kecamatan' => 'Teras', 'desa' => 'Randusari', 'nama' => 'Melati'),
        array('kecamatan' => 'Teras', 'desa' => 'Randusari', 'nama' => 'Dahlia'),
        array('kecamatan' => 'Teras', 'desa' => 'Randusari', 'nama' => 'Segar 1'),
        array('kecamatan' => 'Teras', 'desa' => 'Randusari', 'nama' => 'Mawar'),
        array('kecamatan' => 'Teras', 'desa' => 'Randusari', 'nama' => 'Tunas Harapan 2'),
        array('kecamatan' => 'Teras', 'desa' => 'Randusari', 'nama' => 'Tunas Harapan 1'),
        array('kecamatan' => 'Teras', 'desa' => 'Randusari', 'nama' => 'Anggrek'),
        array('kecamatan' => 'Teras', 'desa' => 'Mojolegi', 'nama' => 'Kenanga 1'),
        array('kecamatan' => 'Teras', 'desa' => 'Mojolegi', 'nama' => 'Kenanga 2'),
        array('kecamatan' => 'Teras', 'desa' => 'Mojolegi', 'nama' => 'Melati'),
        array('kecamatan' => 'Teras', 'desa' => 'Mojolegi', 'nama' => 'Nusa Indah 1'),
        array('kecamatan' => 'Teras', 'desa' => 'Mojolegi', 'nama' => 'Nusa Indah 2'),
        array('kecamatan' => 'Teras', 'desa' => 'Mojolegi', 'nama' => 'Cempaka 1'),
        array('kecamatan' => 'Teras', 'desa' => 'Mojolegi', 'nama' => 'Mawar 1'),
        array('kecamatan' => 'Teras', 'desa' => 'Mojolegi', 'nama' => 'Mawar 2'),
        array('kecamatan' => 'Teras', 'desa' => 'Mojolegi', 'nama' => 'Cempaka 2'),
        array('kecamatan' => 'Teras', 'desa' => 'Tawangsari', 'nama' => 'Marsudi 1'),
        array('kecamatan' => 'Teras', 'desa' => 'Tawangsari', 'nama' => 'Marsudi 2'),
        array('kecamatan' => 'Teras', 'desa' => 'Tawangsari', 'nama' => 'Marsudi 3'),
        array('kecamatan' => 'Teras', 'desa' => 'Tawangsari', 'nama' => 'Marsudi 4'),
        array('kecamatan' => 'Teras', 'desa' => 'Tawangsari', 'nama' => 'Marsudi 5'),
        array('kecamatan' => 'Teras', 'desa' => 'Tawangsari', 'nama' => 'Marsudi 6'),
        array('kecamatan' => 'Teras', 'desa' => 'Gumukrejo', 'nama' => 'Mekar Sari'),
        array('kecamatan' => 'Teras', 'desa' => 'Gumukrejo', 'nama' => 'Yudi Utomo'),
        array('kecamatan' => 'Teras', 'desa' => 'Gumukrejo', 'nama' => 'Ngesti Utomo'),
        array('kecamatan' => 'Teras', 'desa' => 'Gumukrejo', 'nama' => 'Kenanga'),
        array('kecamatan' => 'Teras', 'desa' => 'Gumukrejo', 'nama' => 'Dahlia'),
        array('kecamatan' => 'Teras', 'desa' => 'Gumukrejo', 'nama' => 'Melati'),
        array('kecamatan' => 'Teras', 'desa' => 'Gumukrejo', 'nama' => 'Merpati Putih'),
        array('kecamatan' => 'Teras', 'desa' => 'Krasak', 'nama' => 'Mawar'),
        array('kecamatan' => 'Teras', 'desa' => 'Krasak', 'nama' => 'Melati'),
        array('kecamatan' => 'Teras', 'desa' => 'Krasak', 'nama' => 'Teratai'),
        array('kecamatan' => 'Teras', 'desa' => 'Krasak', 'nama' => 'Dahlia'),
        array('kecamatan' => 'Teras', 'desa' => 'Krasak', 'nama' => 'Kenanga'),
        array('kecamatan' => 'Teras', 'desa' => 'Krasak', 'nama' => 'Anggrek'),
    );

    function up()
    {
        $this->db->query('DELETE FROM posyandu WHERE `uuid` NOT IN (SELECT posyandu FROM user)');
        $this->load->model(array('Faskess', 'Desas', 'Posyandus'));
        foreach ($this->Posyandu as $posyandu){
            $posyandu = (object) $posyandu;
            $kecamatan = $this->Faskess->find(array('nama' => $posyandu->kecamatan));
            $kecamatanUuid = isset($kecamatan[0]) ? $kecamatan[0]->uuid : $this->Faskess->create(array('nama' => $posyandu->kecamatan));

            $desa = $this->Desas->find(array('nama' => $posyandu->desa));
            $desaUuid = isset($desa[0]) ? $desa[0]->uuid : $this->Desas->create(array('nama' => $posyandu->desa));
            $this->Posyandus->create(array(
                'nama' => $posyandu->nama,
                'desa' => $desaUuid,
                'provinsi' => 'Jawa Tengah',
                'kabupaten_kota' => 'Boyolali',
                'puskesmas_kecamatan' => $kecamatanUuid
            ));
        }
        $desaTeras = $this->Desas->find(array('nama' => 'Teras'));
        $kecTeras = $this->Faskess->find(array('nama' => 'Teras'));
        $this->db
            ->where(array('desa' => '', 'puskesmas_kecamatan' => ''))
            ->set('desa', $desaTeras[0]->uuid)
            ->set('puskesmas_kecamatan', $kecTeras[0]->uuid)
            ->set('kabupaten_kota', 'Boyolali')
            ->set('provinsi', 'Jawa Tengah')
            ->update('posyandu');
    }

    function _down()
    {

    }
}
